[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "assessment1",
    "section": "",
    "text": "Ana Grisanti WB STC R Assessment Global Poverty and Inequality Data Team\n\nrm(list = ls())\n\n#Loading WDI dataset\ntag      &lt;- \"202311081903\"\nbase_url &lt;- \"https://github.com/randrescastaneda/pub_data/raw/\"\ndata_url &lt;- paste0(base_url, tag, \"/data/Rtest1/\")\n\nwdi &lt;- readr::read_rds(paste0(data_url, \"wdi_in1.Rds\"))\n\n#Installing necessary packages and calling the libraries\n#install.packages('doBy')\n#install.packages('pracma')\n#install.packages('ddpcr')\nlibrary(ddpcr)\n\n\nAttaching package: 'ddpcr'\n\n\nThe following object is masked from 'package:stats':\n\n    step\n\nlibrary(pracma)\nlibrary(doBy)\n\n\nAttaching package: 'doBy'\n\n\nThe following object is masked from 'package:pracma':\n\n    taylor\n\nlibrary(collapse)\n\nWarning: package 'collapse' was built under R version 4.1.2\n\n\ncollapse 1.9.2, see ?`collapse-package` or ?`collapse-documentation`\n\n\n\nAttaching package: 'collapse'\n\n\nThe following object is masked from 'package:stats':\n\n    D\n\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following object is masked from 'package:doBy':\n\n    order_by\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(tidyverse)\n\nWarning: package 'tidyverse' was built under R version 4.1.2\n\n\nWarning: package 'tibble' was built under R version 4.1.2\n\n\nWarning: package 'tidyr' was built under R version 4.1.2\n\n\nWarning: package 'readr' was built under R version 4.1.2\n\n\nWarning: package 'stringr' was built under R version 4.1.2\n\n\nWarning: package 'forcats' was built under R version 4.1.2\n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ forcats   1.0.0     ✔ readr     2.1.4\n✔ ggplot2   3.4.4     ✔ stringr   1.5.0\n✔ lubridate 1.9.3     ✔ tibble    3.2.1\n✔ purrr     1.0.2     ✔ tidyr     1.3.0\n\n\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ purrr::cross()       masks pracma::cross()\n✖ dplyr::filter()      masks stats::filter()\n✖ lubridate::is.Date() masks collapse::is.Date()\n✖ dplyr::lag()         masks stats::lag()\n✖ dplyr::order_by()    masks doBy::order_by()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidyr)\n\n\nSummary Statistics of GDP per capita by region\n\n\n#Generating new dataset with summary statistics of GDP per capita, by region and year\nrep1_df&lt;- wdi %&gt;% drop_na(gdp)\nrep1_df&lt;-rep1_df%&gt;%\n   group_by(region, date) %&gt;%\n   summarise(N=n(),\n             Mean= weighted.mean(gdp,pop), ##Generating a weighted mean variable for gdp\n             SD= sd(gdp), ##Generating a standard deviation variable for gdp\n             Min= min(gdp),\n             Max= max(gdp))\n\n`summarise()` has grouped output by 'region'. You can override using the\n`.groups` argument.\n\n#FINAL OUTPUT\nwrite.csv(rep1_df, \"ReplicateDF_Q1.csv\", row.names=FALSE)\n#Checking similarity to original data\norg1_df &lt;- readr::read_rds(paste0(data_url, \"wdi_summ_out.Rds\"))\nwaldo::compare(rep1_df, org1_df)\n\n`class(old)`: \"grouped_df\" \"tbl_df\" \"tbl\" \"data.frame\"\n`class(new)`: \"data.table\"                \"data.frame\"\n\n`names(old)[1:5]`: \"region\" \"date\" \"N\" \"Mean\" \"SD\"\n`names(new)[1:5]`: \"region\" \"year\" \"N\" \"Mean\" \"SD\"\n\n`attr(old, 'groups')` is an S3 object of class &lt;tbl_df/tbl/data.frame&gt;, a list\n`attr(new, 'groups')` is absent\n\n`attr(old$region, 'label')` is a character vector ('region')\n`attr(new$region, 'label')` is absent\n\n`old$date` is a double vector (1990, 1991, 1992, 1993, 1994, ...)\n`new$date` is absent\n\n`old$N` is an integer vector (22, 22, 22, 22, 22, ...)\n`new$N` is a double vector (22, 22, 22, 22, 22, ...)\n\n     old$Mean           | new$Mean                           \n [1] 4913.1033824116084 - 4913.1033824116075 [1]             \n [2] 5105.0104171493358 | 5105.0104171493358 [2]             \n [3] 5290.8095613208006 | 5290.8095613208006 [3]             \n [4] 5482.7896793386972 - 5482.7896793386963 [4]             \n [5] 5740.0878796092356 - 5740.0878796092338 [5]             \n [6] 6037.2194463295655 | 6037.2194463295655 [6]             \n [7] 6339.7772987429998 - 6339.7772987430008 [7]             \n [8] 6537.7012496267325 - 6537.7012496267316 [8]             \n [9] 6449.2714744924242 | 6449.2714744924242 [9]             \n[10] 6634.8428345702760 - 6634.8428345702769 [10]            \n ... ...                  ...                and 116 more ...\n\n      old$Mean            | new$Mean                 \n[128] 39972.3937454740808 | 39972.3937454740808 [128]\n[129] 40540.1730477565070 | 40540.1730477565070 [129]\n[130] 41680.3363897968156 | 41680.3363897968156 [130]\n[131] 42299.3843855870582 - 42299.3843855870655 [131]\n[132] 43317.4916249835878 | 43317.4916249835878 [132]\n[133] 44705.8925252675472 | 44705.8925252675472 [133]\n[134] 46162.1959999669634 | 46162.1959999669634 [134]\n\n      old$Mean            | new$Mean                           \n[139] 50641.6393301463177 | 50641.6393301463177 [139]          \n[140] 52075.8345827743615 | 52075.8345827743615 [140]          \n[141] 53382.2451330527474 | 53382.2451330527474 [141]          \n[142] 54332.3212907509514 - 54332.3212907509442 [142]          \n[143] 54901.6846339972617 - 54901.6846339972544 [143]          \n[144] 54483.4046545501769 | 54483.4046545501769 [144]          \n[145] 52575.3572801488772 - 52575.3572801488699 [145]          \n[146] 53554.8870340037756 - 53554.8870340037683 [146]          \n[147] 54048.0111263539293 | 54048.0111263539293 [147]          \n[148] 54833.9476994414872 | 54833.9476994414872 [148]          \n  ... ...                   ...                 and 27 more ...\n\n      old$Mean           | new$Mean                          \n[176] 3933.3196505927381 | 3933.3196505927381 [176]          \n[177] 4163.1986496962954 | 4163.1986496962954 [177]          \n[178] 4314.9787515613989 | 4314.9787515613989 [178]          \n[179] 4486.6074089603626 - 4486.6074089603635 [179]          \n[180] 4696.0101367664583 | 4696.0101367664583 [180]          \n[181] 4961.1473706195020 | 4961.1473706195020 [181]          \n[182] 5264.6321169718831 | 5264.6321169718831 [182]          \n[183] 5604.4025093391583 | 5604.4025093391583 [183]          \n[184] 5901.5029808441441 - 5901.5029808441432 [184]          \n[185] 6206.6246759065261 - 6206.6246759065252 [185]          \n  ... ...                  ...                and 33 more ...\n\nAnd 2 more differences ...\n\n\n\nAggregate stats\n\n\n#Checking data to replicate \norg2_df&lt;- readr::read_rds(paste0(data_url, \"wdi_agg_out.Rds\"))\n\n#Generating new dataset with descriptive statistics of gdp, lifeex, and pov_intl by region and year\nrep2_df&lt;- collap(wdi, by = ~ region + date, \n       custom = list(fmean = .c(lifeex, gdp, pov_intl), ## Generating variables with the corresponding means\n                     fsd = .c(lifeex, gdp, pov_intl), ## Generating variables with the correspoding standard dev.\n                     fmax_uw = .c(lifeex, gdp, pov_intl), \n                     fmin_uw = .c(lifeex, gdp, pov_intl),\n                     fmedian = .c(lifeex, gdp, pov_intl)),\n       w = ~ pop) ##using population weights\n\n#Converting each dataframe to long format, for the three measures\nrep2_df_gdp &lt;- rep2_df %&gt;%\n  gather(estimate, gdp, fmean.gdp:fmedian.gdp, factor_key=TRUE)\nrep2_df_lifeex &lt;- rep2_df %&gt;%\n  gather(estimate, lifeex, fmean.lifeex:fmedian.lifeex, factor_key = TRUE)\nrep2_df_povintl &lt;- rep2_df %&gt;%\n  gather(estimate, pov_intl, fmean.pov_intl:fmedian.pov_intl, factor_key = TRUE)\n\n#Keeping only necessary variables for each dataframe (estimate, region, date, pop and gdp)\nrep2_df_gdp = rep2_df_gdp[c(\"estimate\",\"region\", \"date\", \"pop\", \"gdp\")]\nrep2_df_lifeex = rep2_df_lifeex[c(\"estimate\",\"region\", \"date\", \"pop\", \"lifeex\")]\nrep2_df_povintl = rep2_df_povintl[c(\"estimate\",\"region\", \"date\", \"pop\", \"pov_intl\")]\n\n#Cleaning up estimate variable for the dataframe for estimates of GDP variable\nrep2_df_gdp$estimate &lt;- gsub(\".*fmean.*\", \"Mean\", rep2_df_gdp$estimate)\nrep2_df_gdp$estimate &lt;- gsub(\".*fsd.*\", \"SD\", rep2_df_gdp$estimate)\nrep2_df_gdp$estimate &lt;- gsub(\".*fmin.*\", \"Min\", rep2_df_gdp$estimate)\nrep2_df_gdp$estimate &lt;- gsub(\".*fmax.*\", \"Max\", rep2_df_gdp$estimate)\nrep2_df_gdp$estimate &lt;- gsub(\".*fmedian.*\", \"Median\", rep2_df_gdp$estimate)\n#Cleaning up estimate variable for the dataframe for estimates of lifeex variable\nrep2_df_lifeex$estimate &lt;- gsub(\".*fmean.*\", \"Mean\", rep2_df_lifeex$estimate)\nrep2_df_lifeex$estimate &lt;- gsub(\".*fsd.*\", \"SD\", rep2_df_lifeex$estimate)\nrep2_df_lifeex$estimate &lt;- gsub(\".*fmin.*\", \"Min\", rep2_df_lifeex$estimate)\nrep2_df_lifeex$estimate &lt;- gsub(\".*fmax.*\", \"Max\", rep2_df_lifeex$estimate)\nrep2_df_lifeex$estimate &lt;- gsub(\".*fmedian.*\", \"Median\", rep2_df_lifeex$estimate)\n#Cleaning up estimate variable for the dataframe for estimates of pov_intl variable\nrep2_df_povintl$estimate &lt;- gsub(\".*fmean.*\", \"Mean\", rep2_df_povintl$estimate)\nrep2_df_povintl$estimate &lt;- gsub(\".*fsd.*\", \"SD\", rep2_df_povintl$estimate)\nrep2_df_povintl$estimate &lt;- gsub(\".*fmin.*\", \"Min\", rep2_df_povintl$estimate)\nrep2_df_povintl$estimate &lt;- gsub(\".*fmax.*\", \"Max\", rep2_df_povintl$estimate)\nrep2_df_povintl$estimate &lt;- gsub(\".*fmedian.*\", \"Median\", rep2_df_povintl$estimate)\n\n#Merging dataframes made for each measure, to get the final replicated dataframe with all three measures and the estimates required (mean, SD, min, max and median)\nmerged &lt;- merge(rep2_df_gdp, rep2_df_lifeex, by=c(\"estimate\",\"region\", \"date\", \"pop\"))\nrep2_df &lt;- merge(merged, rep2_df_povintl, by=c(\"estimate\",\"region\", \"date\", \"pop\"))\nrm(merged, rep2_df_, rep2_df_gdp, rep2_df_lifeex, rep2_df_povintl)\n\nWarning in rm(merged, rep2_df_, rep2_df_gdp, rep2_df_lifeex, rep2_df_povintl):\nobject 'rep2_df_' not found\n\n#FINAL OUTPUT\nwrite.csv(rep2_df, \"ReplicateDF_Q2.csv\", row.names=FALSE)\n#Checking for similarity with original datagrame\nwaldo::compare(rep2_df, org2_df)\n\n`class(old)`: \"data.frame\"             \n`class(new)`: \"data.table\" \"data.frame\"\n\n`names(old)[2:7]`: \"region\" \"date\" \"pop\" \"gdp\"    \"lifeex\" \"pov_intl\"\n`names(new)[2:7]`: \"region\" \"date\" \"pop\" \"lifeex\" \"gdp\"    \"pov_intl\"\n\n`attr(old, 'sorted')` is absent\n`attr(new, 'sorted')` is a character vector ('iso3c', 'date')\n\n     old$estimate | new$estimate                  \n [1] \"Max\"        - \"mean\"       [1]              \n [2] \"Max\"        - \"mean\"       [2]              \n [3] \"Max\"        - \"mean\"       [3]              \n [4] \"Max\"        - \"mean\"       [4]              \n [5] \"Max\"        - \"mean\"       [5]              \n [6] \"Max\"        - \"mean\"       [6]              \n [7] \"Max\"        - \"mean\"       [7]              \n [8] \"Max\"        - \"mean\"       [8]              \n [9] \"Max\"        - \"mean\"       [9]              \n[10] \"Max\"        - \"mean\"       [10]             \n ... ...            ...          and 1080 more ...\n\n`attr(old$region, 'label')` is absent\n`attr(new$region, 'label')` is a character vector ('region')\n\n`attr(old$date, 'label')` is absent\n`attr(new$date, 'label')` is a character vector ('year')\n\n`attr(old$pop, 'label')` is absent\n`attr(new$pop, 'label')` is a character vector ('Population, total')\n\n`attr(old$gdp, 'label')` is absent\n`attr(new$gdp, 'label')` is a character vector ('GDP per capita, PPP (constant 2017 international $)')\n\n     old$gdp | new$gdp                 \n [1] 32846   -                         \n [2] 33870   -                         \n [3] 34049   -                         \n [4] 33783   -                         \n [5] 34054   -                         \n [6] 34868   -                         \n [7] 35879   -                         \n [8] 36145   -                         \n [9] 36099   -                         \n[10] 37476   -                         \n ... ...       ...     and 211 more ...\n\n      old$gdp | new$gdp                 \n[434] 3858    | 3858    [216]           \n[435] 3865    | 3865    [217]           \n[436] 3870    | 3870    [218]           \n[437] 1424    - 8497    [219]           \n[438] 1535    - 8691    [220]           \n[439] 1732    - 8667    [221]           \n[440] 1950    - 8576    [222]           \n[441] 2179    - 8619    [223]           \n[442] 2391    - 8796    [224]           \n[443] 2601    - 9011    [225]           \n  ... ...       ...     and 295 more ...\n\nAnd 9 more differences ...\n\n\n\nFind outliers\n\n\norg3_df&lt;-readr::read_rds(paste0(data_url, \"wdi_outliers_out.Rds\"))\n\n#Generating dataset with mean and sd of lifeex, gdp and gini\ndf_summary &lt;- wdi %&gt;% \n  group_by(date) %&gt;% \n  summarise(gdp.mean = weighted.mean(gdp, pop, na.rm=TRUE), ##Generating variable with mean of GDP by year\n            gini.mean= weighted.mean(gini, pop, na.rm=TRUE), ##Generating variable with mean of GINI by year\n            lifeex.mean= weighted.mean(lifeex, pop, na.rm=TRUE),\n            gdp.sd = sd(gdp, na.rm=TRUE), ##Generating variable with standard deviation of GDP by year\n            gini.sd= sd(gini, na.rm=TRUE), ##Generating variable with standard deviation of GINI by year\n            lifeex.sd= sd(lifeex, na.rm=TRUE))\n\n#Joining original data with summary \nrep3_df &lt;- left_join(wdi, df_summary, by = \"date\")\n\n#Generating outlier identifying variables. Creating boolean variables that are TRUE if the measure is less than 2.5 standard deviations above or below the mean.\n  quiet(rep3_df$ll_gdp &lt;- print(rep3_df$gdp &lt; rep3_df$gdp.mean - 2.5*(rep3_df$gdp.sd)))\n  quiet(rep3_df$hl_gdp &lt;- print(rep3_df$gdp &gt; rep3_df$gdp.mean + 2.5*(rep3_df$gdp.sd)))\n  quiet(rep3_df$ll_gini &lt;- print(rep3_df$gini &lt; rep3_df$gini.mean - 2.5*(rep3_df$gini.sd)))\n  quiet(rep3_df$hl_gini &lt;- print(rep3_df$gini &gt; rep3_df$gini.mean + 2.5*(rep3_df$gini.sd)))\n  quiet(rep3_df$ll_lifeex &lt;- print(rep3_df$lifeex &lt; rep3_df$lifeex.mean - 2.5*(rep3_df$lifeex.sd)))\n  quiet(rep3_df$hl_lifeex &lt;- print(rep3_df$lifeex &gt; rep3_df$lifeex.mean + 2.5*(rep3_df$lifeex.sd)))\n\n#FINAL OUTPUT\nwrite.csv(rep3_df, \"ReplicateDF_Q3.csv\", row.names=FALSE)\n#Checking for similarity with original datagrame\nwaldo::compare(rep3_df, org3_df)\n\n     names(old)    | names(new)                  \n[10] \"pov_intl\"    | \"pov_intl\"    [10]          \n[11] \"pov_lmic\"    | \"pov_lmic\"    [11]          \n[12] \"pov_umic\"    | \"pov_umic\"    [12]          \n[13] \"gdp.mean\"    - \"mean_lifeex\" [13]          \n[14] \"gini.mean\"   - \"sd_lifeex\"   [14]          \n[15] \"lifeex.mean\" - \"hl_lifeex\"   [15]          \n[16] \"gdp.sd\"      - \"ll_lifeex\"   [16]          \n[17] \"gini.sd\"     - \"mean_gdp\"    [17]          \n[18] \"lifeex.sd\"   - \"sd_gdp\"      [18]          \n[19] \"ll_gdp\"      - \"hl_gdp\"      [19]          \n ... ...             ...           and 5 more ...\n\n`old$gdp.mean` is a double vector (9566.9769782402, 9510.64978016636, 9492.38913200708, 9489.38029694498, 9599.830824424, ...)\n`new$gdp.mean` is absent\n\n`old$gini.mean` is a double vector (35.8092696275814, 34.8497784891616, 41.8397610388279, 35.4086793883555, 40.9813601512541, ...)\n`new$gini.mean` is absent\n\n`old$lifeex.mean` is a double vector (65.1387081809776, 65.3039173530013, 65.5710908143634, 65.7207119327005, 65.954878380793, ...)\n`new$lifeex.mean` is absent\n\n`old$gdp.sd` is a double vector (14838.7360687013, 14745.7437225457, 14689.8307974482, 14608.2182982226, 14921.0172591504, ...)\n`new$gdp.sd` is absent\n\n`old$gini.sd` is a double vector (9.29539289133757, 12.1397486272174, 10.6440951406701, 11.8460162079916, 10.1400164365416, ...)\n`new$gini.sd` is absent\n\n`old$lifeex.sd` is a double vector (9.72311099091425, 9.6384959014155, 9.79454451916214, 9.94729348325503, 10.3893070261439, ...)\n`new$lifeex.sd` is absent\n\n`old$hl_gdp[79:85]`: TRUE TRUE TRUE FALSE TRUE TRUE TRUE\n`new$hl_gdp[79:85]`: TRUE TRUE TRUE TRUE  TRUE TRUE TRUE\n\n`old$hl_gdp[89:95]`: TRUE TRUE TRUE FALSE FALSE FALSE FALSE\n`new$hl_gdp[89:95]`: TRUE TRUE TRUE TRUE  FALSE FALSE FALSE\n\n      old$hl_gdp | new$hl_gdp               \n[164] FALSE      | FALSE      [164]         \n[165] FALSE      | FALSE      [165]         \n[166] FALSE      | FALSE      [166]         \n[167] FALSE      - TRUE       [167]         \n[168] FALSE      | FALSE      [168]         \n[169] FALSE      | FALSE      [169]         \n[170] FALSE      | FALSE      [170]         \n[171] FALSE      | FALSE      [171]         \n[172] FALSE      - TRUE       [172]         \n[173] FALSE      - TRUE       [173]         \n  ... ...          ...        and 9 more ...\n\nAnd 82 more differences ..."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  }
]